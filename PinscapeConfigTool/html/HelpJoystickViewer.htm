<!DOCTYPE html>
<html>
<head>
   <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
   <link rel="stylesheet" href="main.css"/>
   <title>Joystick Viewer</title>
</head>
<body class="help">

<h1>
   <img style="float: right;" src="joystickicon.png">
   Joystick Input Viewer
   <img style="visibility: hidden; vertical-align: middle;" src="joystickicon.png">
</h1>

<div>

   <p>
	  This window lets you view the joystick input coming from the
	  Pinscape Controller unit.  This shows the processed version
	  of the KL25Z input, in the format seen by Visual Pinball and other
	  software when reading from the joystick.
   </p>

   <h2>Accelerometer</h2>
   <p>
	  The crosshairs show the readings from the KL25Z's on-board
	  accelerometer.  This senses the motion of the device, so we
	  use it in pinball emulators to sense when you "nudge" the
	  cabinet.  If you observe the crosshairs as you move and nudge
	  the device, you'll see how it responds to cabinet motion.
   </p>
   <p>
	  The device also picks up any incline of the board, since
	  gravity is a type of acceleration.  If you have "auto-centering"
	  enabled in the setup, the firmware automatically cancels out
	  the incline by zeroing the readings after the board has been
	  sitting still for a few seconds.  You can adjust the timing
	  of the automatic centering.
   </p>
   <p>The automatic centering is useful because we want the accelerometer
	  to report zero acceleration whenever the cabinet is sitting still.
	  Any non-zero acceleration will show up in the pinball simulation
	  as an influence on the ball.  We only want this type of influence
	  to appear in response to nudges and other cabinet motion.
   </p>
   <p>
	  If you disabled auto-centering in the setup, you can click the
	  "Center Now" button to zero the accelerometer manually.
   </p>

   <h2>Accelerometer Velocity</h2>
   <p>
      This shows the "integrated velocity" reading for the accelerometer.
      This is only enabled if you're using the August 2024 or later
      firmware, and you've configured the joystick report to use the
      <b>X/Y/Z + RX/RY/RZ</b> format.  When that format is enabled,
      the device calculates the implied cabinet velocity from the
      acceleration readings, and reports the velocity on the RX/RY
      axes.  This graph shows the current velocity reading.  
   </p>
   <p>
      The velocity reading is designed for use with pinball
      simulators that can accept nudge input in the form of velocity.
      The reason to use velocity input when possible is that the device can
      calculate this more accurately than the simulator can, because of
      the device's direct, high-speed access to the sensor.  Calculating
      the velocity on the device and passing it to the simulator should
      provide a more natural and realistic nudge response in the simulation.
   </p>
   <p>
      The <b>Scale</b> box below the velocity graph lets you adjust
      the scaling factor used to send the velocity information to
      the PC.  Set this to 0 to use the default scaling (currently 20).
      You should adjust this for your cabinet's dynamics by testing
      hard nudges - try using nudges equal to the most aggressive
      you'd use during virtual pinball play.  Adjust the scaling
      factor so that the hardest nudges result in readings that
      are <i>almost</i> at full scale, 4096 on the graph.  This will
      take advantage of the full available precision in the USB
      transmission.  Readings around 20 should work well in most
      cabinets.
   </p>
   
   <h2>Plunger</h2>
   <p>
	  The plunger readings shown here take into account the
	  calibration.  If the plunger is calibrated properly, the
	  reading should be at the zero point, indicated by the arrow,
	  when the physical plunger is "parked" at its normal resting
	  position.  The bar should move to the right when you pull
	  back the plunger.  If the reading isn't showing zero when
	  the plunger is at its resting position, you should re-run
	  the calibration process from the Plunger Setup window.
   </p>

   <h2>Joystick buttons</h2>
   <p>
	  The buttons displayed here are the "mapped" joystick buttons.
	  These aren't exactly the same as the physical buttons wired
	  to the controller, because the firmware translates each button
	  press to the mapping you selected for the button, either as a
	  joystick button or a keyboard key.  If you assigned a physical
	  button as a keyboard key, it won't show up here at all when you
	  press it, because the button sends input to Windows as keyboard
	  input instead.  If you mapped a physical button to a joystick
	  button, the assigned button should light up here when you press it.
   </p>

   <p>
	  If you're still setting up your connections, you might find it
	  helpful to look at the Button Tester and Plunger Tester windows.
	  Those will give you a more direct view of what's going on at
	  the hardware level.
   </p>

   <h2>Capture</h2>
   <p>
	  The "Capture" option lets you collect readings from the
	  accelerometer and plunger inputs and save the collected data
	  to a file.  This is mostly for debugging purposes.  When the
	  capture section is enabled, hold down the Control key to
	  collect data.  The new readings are added to the text box.
	  (Readings are only collected while you're holding down the
	  Control key to avoid collecting excessive amounts - the
	  readings come in very fast.  When troubleshooting, you usually
	  only want to collect readings related to something specific
	  you're doing, like firing the plunger or nudging the machine.
	  Filtering with the Control key makes it fairly easy to
	  collect a focused set of readings around a particular event.)
	  Once you've collected the readings you're after, you can
	  save them to a file if desired by clicking the disk icon.
	  This can be helpful for sharing the data with someone else
	  who's helping you troubleshoot.
   </p>

</div>

</body>
</html>
